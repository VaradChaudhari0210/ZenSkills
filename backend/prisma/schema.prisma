generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            String       @id @default(uuid())
  email         String       @unique(map: "user_unique_1") @db.VarChar(100)
  created_at    DateTime     @db.Timestamptz(6) @default(now())
  gender        gender_enum?
  is_deleted    Boolean
  location      String?
  password      String
  phone_number  String?      @db.VarChar(13)
  status        UserStatus   @default(active)
  role          UserRole
  googleId      String?      @unique(map: "user_unique") @db.VarChar
  is_verified   Boolean      @default(false)
  mentee        mentee[]
  mentor        mentor[]
}

model mentee {
  name              String       @db.VarChar(50)
  bio               String?
  mentee_id         String             @id(map: "mentee_pk") @default(uuid())
  id                String
  User              User               @relation(fields: [id], references: [id], onDelete: Cascade, map: "mentee_user_fk")
  mentee_interests  mentee_interests[]
}

model mentee_interests {
  mentee_id           String
  tag_id              String
  mentee_interests_id String @id(map: "mentee_interests_pk") @default(uuid())
  mentee              mentee @relation(fields: [mentee_id], references: [mentee_id], onDelete: Cascade, map: "mentee_interests_mentee_fk")
  tags                tags   @relation(fields: [tag_id], references: [tag_id], onDelete: Cascade, map: "mentee_interests_tags_fk")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model mentor {
  id                         String
  name                       String             @db.VarChar(50)
  bio                        String?
  experience_years           Int                @default(0)
  mentor_id                  String             @id(map: "mentor_pk") @default(uuid())
  rating                     Float?             @db.Real
  number_of_mentees_mentored Int                @default(0)
  company                    String?            @db.VarChar(255)
  mentor_job_title           String             @db.VarChar(50)
  User                       User               @relation(fields: [id], references: [id], onDelete: Cascade, map: "mentor_user_fk")
  mentor_expertise           mentor_expertise[]
  number_of_sessions         Int                @default(0)
  credit_score               Float              @default(75)           
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model mentor_expertise {
  mentor_id           String
  tag_id              String
  mentor_expertise_id String @id(map: "mentor_expertise_pk") @default(uuid())
  mentor              mentor @relation(fields: [mentor_id], references: [mentor_id], onDelete: Cascade, map: "mentor_expertise_mentor_fk")
  tags                tags   @relation(fields: [tag_id], references: [tag_id], onDelete: Cascade, map: "mentor_expertise_tags_fk")
}

model tags {
  tag_name         String             @unique(map: "tags_unique") @db.VarChar(100)
  tag_id           String             @id(map: "tags_pk") @default(uuid())
  mentee_interests mentee_interests[]
  mentor_expertise mentor_expertise[]
}

model tempuser {
  id            String   @id(map: "tempuser_pk") @default(uuid())
  email         String   @db.VarChar(100)
  created_at    DateTime @db.Timestamptz(6) @default(now())
  password      String
  role          UserRole
}

enum gender_enum {
  Male
  Female
  Other
  Prefer_not_to_say
}

enum UserStatus {
  active
  inactive
  suspended
}

enum UserRole {
  admin
  mentor
  mentee
}
